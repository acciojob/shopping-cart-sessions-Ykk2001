<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>Products</h1>
    <ul id="product-list"></ul>
	<h2>Shopping Cart</h2>
    <ul id="cart-list"></ul>
    <button id="clear-cart-btn">Clear Cart</button>

    <script>
        const products=[
            {
            id:1,name:"Product 1",price:10
            },
            {
             id:2,name:"Product 2",price:20   
            },
            {
             id:3,name:"Product 3",price:30   
            },
            {
             id:4,name:"Product 4",price:40   
            },
            {
             id:5,name:"Product 5",price:50   
            }
    ]
        //select element
        const productList=document.getElementById('product-list');
        const cartList=document.getElementById('cart-list');
        const clearCartBtn=document.getElementById('clear-cart-btn');

        //retrive cart from sessionStorage
        let cart=JSON.parse(sessionStorage.getItem('cart')) || [];

         //firstly all product has beem rendered on ui
        function renderProducts()
        {
          products.forEach((product)=>{
            let li=document.createElement('li');
            li.innerHTML=`${product.name}-$${product.price}
             <button class='add-to-cart-btn' data-id='${product.id}'>Add to Cart</button>
            `
            productList.appendChild(li);
            productList.appendChild(document.createElement('br'));
          })

          //add listener to the each btn in alist 

          document.querySelectorAll('.add-to-cart-btn').forEach((btn)=>{
            btn.addEventListener('click',()=>{
                const productId=btn.getAttribute('data-id');
                addToCart(productId);
                // console.log(productId)
            })
          })
        }
        renderProducts()

        function addToCart(productId)
        {
            //we will gt product with the help of ID
         const product=products.find((p)=>p.id==productId);
         if(product)
         {
           cart.push(product);
           updateSessionStorage();
           renderCart()
         }
        }
        //update session storage after adding the product iniside the cart
        function updateSessionStorage()
        {
            sessionStorage.setItem('cart',JSON.stringify(cart))
        }

        //render the cart items
        function renderCart()
        {
         cartList.innerText='';

         if(cart.length==0)
         {
            const emptyMsg=document.createElement('li');
            emptyMsg.textContent='Cart is Empty';
            emptyMsg.style.color='red';
            cartList.appendChild(emptyMsg);
            return;
         }

         cart.forEach((item)=>{
            const li=document.createElement('li');
            li.textContent=`${item.name} -$${item.price}`;
            cartList.appendChild(li);
         })
        }//renderCart

        //clear Entire Cart
        clearCartBtn.addEventListener('click',()=>{
            clearCart()
        })
        function clearCart()
        {
            cart=[];
            updateSessionStorage()
            renderCart()
        }

    </script>
</body>
</html>